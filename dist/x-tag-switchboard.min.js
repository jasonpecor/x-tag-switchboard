xtag.mixins.switchboard=function(){"use strict";function t(t,e){n[t]||(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}function e(t,e){if(!n[t])return!1;var c=n[t].indexOf(e);return-1===c?!1:(n[t].splice(c,1),!0)}var n={},c=!0,r={patch:function(t,e){if("string"==typeof e)t._patches.push(e);else{if(!(e instanceof Array))throw new TypeError("Cannot patch event: Must be string or array of strings");t._patches=t._patches.concat(e)}},connect:function(e){if(e._patches)for(var n=e._patches.length,c=0;n>c;c++)t(e._patches[c],e)},disconnect:function(t){if(t._patches)for(var n=t._patches.length,c=0;n>c;c++)e(t._patches[c],t)},unpatch:function(t,n){if(n)for(var c=n.length,i=0;c>i;i++){var a=t._patches.indexOf(n[i]);-1!==a&&(t._patches.splice(a,1),t.parentNode&&e(n[i],t))}else t.parentNode&&r.disconnect(t),t._patches=[]},transmit:function(t,e){if(!c)return 0;if(!n[t])return 0;for(var r=n[t].length,i=0;r>i;i++)xtag.fireEvent(n[t][i],t,e);return r},get online(){return c},set online(t){c=!!t},get connections(){return n}};xtag.switchboard=r;var i={lifecycle:{created:function(){Object.defineProperty(this,"switchboard",{value:r,writable:!1,enumerable:!1}),Object.defineProperty(this,"_patches",{value:[],enumerable:!1,writable:!0})},inserted:function(){this.switchboard.connect(this)},removed:function(){this.switchboard.disconnect(this)}}};return i}();